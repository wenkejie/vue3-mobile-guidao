import{d as X,r as n,k as s,h as i,e as y,C as _,p as m,D as h,g as f,f as g,E as Y,o,F,m as C,z as L,G as I,H as D,j as Z,J as ee,I as te}from"./index-CIq-oMdo.js";import{C as ne}from"./index-H4v7lFx6.js";import"./index-gofcAkLv.js";import{F as oe}from"./index-CfBzFnno.js";import{D as se,a as ae}from"./index-OEG6GTi1.js";import{F as le}from"./index-BLH94utM.js";import{L as ie}from"./index-s7_3JXei.js";import"./use-scope-id-sANgzUDS.js";import"./use-id-BlRh9Qoc.js";import"./index-DEoV0_af.js";const ce={class:"form-create-wrap"},re={class:"wrap"},ue={class:"content-wrap"},de={class:"q-wrap"},pe=["onClick"],_e={class:"drap-area"},me={key:0,class:"q-item"},ve={key:0,class:"icon-radio"},fe=["onUpdate:modelValue"],ge={key:0,class:"q-radio"},ye={key:0,class:"icon-radio"},he=["onFocus"],ke={key:1,class:"q-item text-wrap"},we={key:2,class:"q-item option-wrap pt10"},Ne=X({__name:"createFrom2",setup(qe){const V=n(!1);n(!1);const U=n(!1),x=n([{value:"单选题",text:"单选题"},{value:"多选题",text:"多选题"},{value:"文本题",text:"文本题"}]),T=n(["cn","en","kr","jp","fr","de","ru","sp","po","it","nl","id","tr","thai","zh","fa","ro","ar"]),N=n(["中文","英语","韩语","日语","法语","德语","俄语","西班牙语","葡萄牙语","意大利语","荷兰语","印度语","土耳其语","泰语","繁体中文","波斯语","罗马尼亚语","阿拉伯语"]);n("英语"),n("中文");const S=n(["中文"]);n(!1),n("单选题");const k=n("添加选项");n([0,1]),n([5,10]),n([]);const c=n({display_name:"",name:[{questionnaire_name:"",desc:"",language:"cn"}],repeat_submit:!1,question:[{question_id:1,types:"单选题",is_required:!1,content:[{language:"cn",title:"",answer:[{answer_id:1,description:"选项1"}],line_answer:{line_value:1,line_end_value:5,line_tag:"",line_end_tag:""},text_answer:""}]}]});n(!0);const r=n(0);n(!1);function $(){V.value=!1}function B({relatedContext:e,draggedContext:t}){const a=e.index,l=t.index;e.element.question_id=l+1,t.element.question_id=a+1}function R(e){const t=e.target.classList;t.contains("add-list")||t.contains("el-icon-plus")||(r.value="title")}function z(e,t){const a=e.target.classList;a.contains("el-icon-delete")||a.contains("icon-copy")||r.value===t||(r.value=t)}function E(e,t){const a=c.value.question[e].content[t].answer;O(a)}function M(e,t,a){c.value.question[e].content[t].answer.splice(a,1)}function O(e){const t=e.length?Number.parseInt(e[e.length-1].description.substr(2))+1:1,a="选项".concat(t);e.push({answer_id:e.length+1,description:a}),ee(()=>{const l=document.querySelectorAll(".radio-input");l[l.length-1].focus()})}function j(){const t=S.value.map(l=>T.value[N.value.indexOf(l)]).map(l=>({language:l,title:"",answer:[{answer_id:1,description:"选项1"}],line_answer:{line_value:1,line_end_value:5,line_tag:"",line_end_tag:""},text_answer:""})),a={question_id:c.value.question.length+1,types:"单选题",is_required:!1,content:t};c.value.question.push(a),r.value=c.value.question.length-1}function G(e){c.value.question.splice(e,1),r.value=e===0&&c.value.question.length>0?e:e-1}function J(e){console.log("submit",JSON.stringify(c.value))}return(e,t)=>{const a=ie,l=te,A=se,H=ae,K=oe,P=ne,Q=Y("draggable"),W=le;return o(),s("div",ce,[i(U)?(o(),y(a,{key:0,type:"spinner"})):_("",!0),m("div",re,[m("div",ue,[m("div",{class:h(["item title",{"title-focus":i(r)==="title"}]),onClick:R},[i(c).question[0].length?_("",!0):(o(),s("div",{key:0,class:"add-list",onClick:j},[f(l,{name:"plus"})]))],2),m("div",de,[f(W,{onSubmit:J},{default:g(()=>[(o(!0),s(F,null,C(i(c).question,(u,d)=>(o(),y(Q,{key:d,list:i(c).question,move:B,onStart:t[1]||(t[1]=v=>V.value=!0),onEnd:$},{default:g(()=>[m("div",{class:h(["q-li",{"q-li-focus":i(r)===d}]),onClick:v=>z(v,d)},[m("div",_e,[f(l,{name:"drag"})]),(o(!0),s(F,null,C(u.content,(v,w)=>(o(),s("div",{key:w},[f(P,{inset:""},{default:g(()=>[f(K,{modelValue:v.title,"onUpdate:modelValue":p=>v.title=p,class:"form-cell-group",label:"问题：","label-width":"auto",center:"",clearable:"",placeholder:"请输入问题",onFocus:e.autoText,onInput:e.autoText},{button:g(()=>[i(r)===d?(o(),y(H,{key:0},{default:g(()=>[f(A,{modelValue:u.types,"onUpdate:modelValue":p=>u.types=p,options:i(x)},null,8,["modelValue","onUpdate:modelValue","options"])]),_:2},1024)):_("",!0)]),_:2},1032,["modelValue","onUpdate:modelValue","onFocus","onInput"]),["下拉列表","单选题","多选题"].includes(u.types)?(o(),s("div",me,[(o(!0),s(F,null,C(v.answer,(p,q)=>(o(),s("div",{key:q,class:"q-radio"},[["下拉列表","优先级"].includes(u.types)?(o(),s("div",ve,L(q+1)+".",1)):(o(),s("div",{key:1,class:h(["icon-radio",{"icon-cirle":u.types==="单选题","icon-square":u.types==="多选题"}])},null,2)),I(m("input",{"onUpdate:modelValue":b=>p.description=b,class:"radio-input"},null,8,fe),[[D,p.description]]),i(r)===d?(o(),y(l,{key:2,name:"cross",onClick:b=>M(d,w,q)},null,8,["onClick"])):_("",!0)]))),128)),i(r)===d?(o(),s("div",ge,[["下拉列表","优先级"].includes(u.types)?(o(),s("div",ye,L(v.answer.length+1)+".",1)):(o(),s("div",{key:1,class:h(["icon-radio",{"icon-cirle":u.types==="单选题","icon-square":u.types==="多选题"}])},null,2)),I(m("input",{"onUpdate:modelValue":t[0]||(t[0]=p=>Z(k)?k.value=p:null),class:"radio-add",onFocus:p=>E(d,w)},null,40,he),[[D,i(k)]])])):_("",!0)])):_("",!0),u.types==="文本题"?(o(),s("div",ke,"文本回答")):_("",!0),i(r)===d?(o(),s("div",we,[f(l,{name:"delete",onClick:p=>G(d)},null,8,["onClick"])])):_("",!0)]),_:2},1024)]))),128))],10,pe)]),_:2},1032,["list"]))),128))]),_:1})])])])])}}});export{Ne as default};
