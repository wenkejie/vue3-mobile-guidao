System.register(["./index-legacy-BmHbVtLw.js","./index-legacy-DjXLRpCA.js","./index-legacy-By73AkkA.js","./index-legacy-B6r4yNyH.js","./index-legacy-BHxkhfyJ.js","./mount-component-legacy-Dg-kNqcX.js"],(function(e,t){"use strict";var a,o,l,n,r,i,s,c,u,d,m,f,p,v,g,y,h,D,w,b,k,S,x,O,T,C,B,M,A,P,R,F,H,I,j,z,W,N,L,Y,V,U;return{setters:[e=>{a=e.r,o=e.aH,l=e.K,n=e.d,r=e.w,i=e.q,s=e.s,c=e.g,u=e.P,d=e.aq,m=e.a0,f=e.T,p=e.aI,v=e.aj,g=e.I,y=e.V,h=e.ai,D=e.as,w=e.aJ,b=e.ar,k=e.$,S=e.ax,x=e.aK,O=e.c,T=e.aL,C=e.aM,B=e.L,M=e.ao,A=e.aN,P=e.aO,R=e.S,F=e.R,H=e.aP,I=e.aQ,j=e.aR},e=>{z=e.P,W=e.u},e=>{N=e.B},e=>{L=e.L},e=>{Y=e.p},e=>{V=e.m,U=e.u}],execute:function(){let t=0;const[$,q]=l("toast"),K=["show","overlay","teleport","transition","overlayClass","overlayStyle","closeOnClickOverlay","zIndex"],E={icon:String,show:Boolean,type:m("text"),overlay:Boolean,message:f,iconSize:f,duration:p(2e3),position:m("middle"),teleport:[String,Object],wordBreak:String,className:v,iconPrefix:String,transition:m("van-fade"),loadingType:String,forbidClick:Boolean,overlayClass:v,overlayStyle:Object,closeOnClick:Boolean,closeOnClickOverlay:Boolean,zIndex:f};var J=n({name:$,props:E,emits:["update:show"],setup(e,{emit:a,slots:o}){let l,n=!1;const m=()=>{const a=e.show&&e.forbidClick;n!==a&&(n=a,n?(t||document.body.classList.add("van-toast--unclickable"),t++):t&&(t--,t||document.body.classList.remove("van-toast--unclickable")))},f=e=>a("update:show",e),p=()=>{e.closeOnClick&&f(!1)},v=()=>clearTimeout(l),h=()=>{const{icon:t,type:a,iconSize:o,iconPrefix:l,loadingType:n}=e;return t||"success"===a||"fail"===a?c(g,{name:t||a,size:o,class:q("icon"),classPrefix:l},null):"loading"===a?c(L,{class:q("loading"),size:o,type:n},null):void 0},D=()=>{const{type:t,message:a}=e;return o.message?c("div",{class:q("text")},[o.message()]):y(a)&&""!==a?"html"===t?c("div",{key:0,class:q("text"),innerHTML:String(a)},null):c("div",{class:q("text")},[a]):void 0};return r((()=>[e.show,e.forbidClick]),m),r((()=>[e.show,e.type,e.message,e.duration]),(()=>{v(),e.show&&e.duration>0&&(l=setTimeout((()=>{f(!1)}),e.duration))})),i(m),s(m),()=>c(z,u({class:[q([e.position,"normal"===e.wordBreak?"break-normal":e.wordBreak,{[e.type]:!e.icon}]),e.className],lockScroll:!1,onClick:p,onClosed:v,"onUpdate:show":f},d(e,K)),{default:()=>[h(),D()]})}});let Q=[],G=!1,X=h({},{icon:"",type:"text",message:"",className:"",overlay:!1,onClose:void 0,onOpened:void 0,duration:2e3,teleport:"body",iconSize:void 0,iconPrefix:void 0,position:"middle",transition:"van-fade",forbidClick:!1,loadingType:void 0,overlayClass:"",overlayStyle:void 0,closeOnClick:!1,closeOnClickOverlay:!1});const Z=new Map;function _(){if(!Q.length||G){const e=function(){const{instance:e,unmount:t}=V({setup(){const e=a(""),{open:t,state:o,close:l,toggle:n}=U(),i=()=>{};return r(e,(e=>{o.message=e})),b().render=()=>c(J,u(o,{onClosed:i,"onUpdate:show":n}),null),{open:t,close:l,message:e}}});return e}();Q.push(e)}return Q[Q.length-1]}function ee(e={}){if(!D)return{};const t=_(),a=w(o=e)?o:{message:o};var o;return t.open(h({},X,Z.get(a.type||X.type),a)),t}k(J);const[te,ae,oe]=l("calendar");function le(e,t){const a=e.getFullYear(),o=t.getFullYear();if(a===o){const a=e.getMonth(),o=t.getMonth();return a===o?0:a>o?1:-1}return a>o?1:-1}function ne(e,t){const a=le(e,t);if(0===a){const a=e.getDate(),o=t.getDate();return a===o?0:a>o?1:-1}return a}const re=e=>new Date(e),ie=e=>Array.isArray(e)?e.map(re):re(e);function se(e,t){const a=re(e);return a.setDate(a.getDate()+t),a}const ce=e=>se(e,-1),ue=e=>se(e,1),de=()=>{const e=new Date;return e.setHours(0,0,0,0),e};h({},Y,{modelValue:S(),filter:Function,formatter:{type:Function,default:(e,t)=>t}});const[me]=l("calendar-day");var fe=n({name:me,props:{item:x(Object),color:String,index:Number,offset:p(0),rowHeight:String},emits:["click","clickDisabledDate"],setup(e,{emit:t,slots:a}){const o=O((()=>{var t;const{item:a,index:o,color:l,offset:n,rowHeight:r}=e,i={height:r};if("placeholder"===a.type)return i.width="100%",i;if(0===o&&(i.marginLeft=100*n/7+"%"),l)switch(a.type){case"end":case"start":case"start-end":case"multiple-middle":case"multiple-selected":i.background=l;break;case"middle":i.color=l}return n+((null==(t=a.date)?void 0:t.getDate())||1)>28&&(i.marginBottom=0),i})),l=()=>{"disabled"!==e.item.type?t("click",e.item):t("clickDisabledDate",e.item)},n=()=>{const{topInfo:t}=e.item;if(t||a["top-info"])return c("div",{class:ae("top-info")},[a["top-info"]?a["top-info"](e.item):t])},r=()=>{const{bottomInfo:t}=e.item;if(t||a["bottom-info"])return c("div",{class:ae("bottom-info")},[a["bottom-info"]?a["bottom-info"](e.item):t])},i=()=>{const{item:t,color:a,rowHeight:o}=e,{type:l,text:i}=t,s=[n(),i,r()];return"selected"===l?c("div",{class:ae("selected-day"),style:{width:o,height:o,background:a}},[s]):s};return()=>{const{type:t,className:a}=e.item;return"placeholder"===t?c("div",{class:ae("day"),style:o.value},null):c("div",{role:"gridcell",style:o.value,class:[ae("day",t),a],tabindex:"disabled"===t?void 0:-1,onClick:l},[i()])}}});const[pe]=l("calendar-month"),ve={date:x(Date),type:String,color:String,minDate:x(Date),maxDate:x(Date),showMark:Boolean,rowHeight:f,formatter:Function,lazyRender:Boolean,currentDate:[Date,Array],allowSameDay:Boolean,showSubtitle:Boolean,showMonthTitle:Boolean,firstDayOfWeek:Number};var ge=n({name:pe,props:ve,emits:["click","clickDisabledDate"],setup(e,{emit:t,slots:o}){const[l,n]=T(),r=a(),i=a(),s=C(i),u=O((()=>{return t=e.date,oe("monthTitle",t.getFullYear(),t.getMonth()+1);var t})),m=O((()=>B(e.rowHeight))),f=O((()=>{const t=e.date.getDay();return e.firstDayOfWeek?(t+7-e.firstDayOfWeek)%7:t})),p=O((()=>{return t=e.date.getFullYear(),a=e.date.getMonth()+1,32-new Date(t,a-1,32).getDate();var t,a})),v=O((()=>l.value||!e.lazyRender)),g=t=>{const{type:a,minDate:o,maxDate:l,currentDate:n}=e;if(ne(t,o)<0||ne(t,l)>0)return"disabled";if(null===n)return"";if(Array.isArray(n)){if("multiple"===a)return(t=>{const a=t=>e.currentDate.some((e=>0===ne(e,t)));if(a(t)){const e=ce(t),o=ue(t),l=a(e),n=a(o);return l&&n?"multiple-middle":l?"end":n?"start":"multiple-selected"}return""})(t);if("range"===a)return(t=>{const[a,o]=e.currentDate;if(!a)return"";const l=ne(t,a);if(!o)return 0===l?"start":"";const n=ne(t,o);return e.allowSameDay&&0===l&&0===n?"start-end":0===l?"start":0===n?"end":l>0&&n<0?"middle":""})(t)}else if("single"===a)return 0===ne(t,n)?"selected":"";return""},y=t=>{if("range"===e.type){if("start"===t||"end"===t)return oe(t);if("start-end"===t)return`${oe("start")}/${oe("end")}`}},h=()=>{if(e.showMonthTitle)return c("div",{class:ae("month-title")},[o["month-title"]?o["month-title"]({date:e.date,text:u.value}):u.value])},D=()=>{if(e.showMark&&v.value)return c("div",{class:ae("month-mark")},[e.date.getMonth()+1])},w=O((()=>{const e=Math.ceil((p.value+f.value)/7);return Array(e).fill({type:"placeholder"})})),b=O((()=>{const t=[],a=e.date.getFullYear(),o=e.date.getMonth();for(let l=1;l<=p.value;l++){const n=new Date(a,o,l),r=g(n);let i={date:n,type:r,text:l,bottomInfo:y(r)};e.formatter&&(i=e.formatter(i)),t.push(i)}return t})),k=O((()=>b.value.filter((e=>"disabled"===e.type)))),S=(a,l)=>c(fe,{item:a,index:l,color:e.color,offset:f.value,rowHeight:m.value,onClick:e=>t("click",e),onClickDisabledDate:e=>t("clickDisabledDate",e)},d(o,["top-info","bottom-info"]));return W({getTitle:()=>u.value,getHeight:()=>s.value,setVisible:n,scrollToDate:(e,t)=>{if(r.value){const a=M(r.value),o=w.value.length,l=(Math.ceil((t.getDate()+f.value)/7)-1)*a.height/o;A(e,a.top+l+e.scrollTop-M(e).top)}},disabledDays:k}),()=>c("div",{class:ae("month"),ref:i},[h(),c("div",{ref:r,role:"grid",class:ae("days")},[D(),(v.value?b:w).value.map(S)])])}});const[ye]=l("calendar-header");var he=n({name:ye,props:{date:Date,title:String,subtitle:String,showTitle:Boolean,showSubtitle:Boolean,firstDayOfWeek:Number},emits:["clickSubtitle"],setup(e,{slots:t,emit:a}){const o=()=>{if(e.showTitle){const a=e.title||oe("title"),o=t.title?t.title():a;return c("div",{class:ae("header-title")},[o])}},l=e=>a("clickSubtitle",e),n=()=>{if(e.showSubtitle){const a=t.subtitle?t.subtitle({date:e.date,text:e.subtitle}):e.subtitle;return c("div",{class:ae("header-subtitle"),onClick:l},[a])}},r=()=>{const{firstDayOfWeek:t}=e,a=oe("weekdays"),o=[...a.slice(t,7),...a.slice(0,t)];return c("div",{class:ae("weekdays")},[o.map((e=>c("span",{class:ae("weekday")},[e])))])};return()=>c("div",{class:ae("header")},[o(),n(),r()])}});const De={show:Boolean,type:m("single"),title:String,color:String,round:R,readonly:Boolean,poppable:R,maxRange:F(null),position:m("bottom"),teleport:[String,Object],showMark:R,showTitle:R,formatter:Function,rowHeight:f,confirmText:String,rangePrompt:String,lazyRender:R,showConfirm:R,defaultDate:[Date,Array],allowSameDay:Boolean,showSubtitle:R,closeOnPopstate:R,showRangePrompt:R,confirmDisabledText:String,closeOnClickOverlay:R,safeAreaInsetTop:Boolean,safeAreaInsetBottom:R,minDate:{type:Date,validator:H,default:de},maxDate:{type:Date,validator:H,default:()=>{const e=de();return new Date(e.getFullYear(),e.getMonth()+6,e.getDate())}},firstDayOfWeek:{type:f,default:0,validator:e=>e>=0&&e<=6}};var we=n({name:te,props:De,emits:["select","confirm","unselect","monthShow","overRange","update:show","clickSubtitle","clickDisabledDate"],setup(e,{emit:t,slots:l}){const n=(t,a=e.minDate,o=e.maxDate)=>-1===ne(t,a)?a:1===ne(t,o)?o:t,i=(t=e.defaultDate)=>{const{type:a,minDate:o,maxDate:l,allowSameDay:r}=e;if(null===t)return t;const i=de();return"range"===a?(Array.isArray(t)||(t=[]),[n(t[0]||i,o,r?l:ce(l)),n(t[1]||i,r?o:ue(o))]):"multiple"===a?Array.isArray(t)?t.map((e=>n(e))):[n(i)]:(t&&!Array.isArray(t)||(t=i),n(t))};let s;const m=a(),f=a({textFn:()=>"",date:void 0}),p=a(i()),[v,g]=function(){const e=a([]),t=[];return o((()=>{e.value=[]})),[e,a=>(t[a]||(t[a]=t=>{e.value[a]=t}),t[a])]}(),y=O((()=>e.firstDayOfWeek?+e.firstDayOfWeek%7:0)),h=O((()=>{const t=[],a=new Date(e.minDate);a.setDate(1);do{t.push(new Date(a)),a.setMonth(a.getMonth()+1)}while(1!==le(a,e.maxDate));return t})),D=O((()=>{if(p.value){if("range"===e.type)return!p.value[0]||!p.value[1];if("multiple"===e.type)return!p.value.length}return!p.value})),w=()=>{const e=j(m.value),a=e+s,o=h.value.map(((e,t)=>v.value[t].getHeight()));if(a>o.reduce(((e,t)=>e+t),0)&&e>0)return;let l,n=0;const r=[-1,-1];for(let i=0;i<h.value.length;i++){const s=v.value[i];n<=a&&n+o[i]>=e&&(r[1]=i,l||(l=s,r[0]=i),v.value[i].showed||(v.value[i].showed=!0,t("monthShow",{date:s.date,title:s.getTitle()}))),n+=o[i]}h.value.forEach(((e,t)=>{const a=t>=r[0]-1&&t<=r[1]+1;v.value[t].setVisible(a)})),l&&(f.value={textFn:l.getTitle,date:l.date})},b=e=>{I((()=>{h.value.some(((t,a)=>0===le(t,e)&&(m.value&&v.value[a].scrollToDate(m.value,e),!0))),w()}))},k=()=>{if(!e.poppable||e.show)if(p.value){const t="single"===e.type?p.value:p.value[0];H(t)&&b(t)}else I(w)},S=()=>{e.poppable&&!e.show||(I((()=>{s=Math.floor(M(m).height)})),k())},x=(e=i())=>{p.value=e,k()},T=()=>{var e;return t("confirm",null!=(e=p.value)?e:ie(p.value))},C=(a,o)=>{const l=e=>{p.value=e,t("select",ie(e))};if(o&&"range"===e.type){const o=(a=>{const{maxRange:o,rangePrompt:l,showRangePrompt:n}=e;return!(o&&function(e){const t=e[0].getTime();return(e[1].getTime()-t)/864e5+1}(a)>+o&&(n&&ee(l||oe("rangePrompt",o)),t("overRange"),1))})(a);if(!o)return void l([a[0],se(a[0],+e.maxRange-1)])}l(a),o&&!e.showConfirm&&T()},B=O((()=>v.value.reduce(((e,t)=>{var a,o;return e.push(...null!=(o=null==(a=t.disabledDays)?void 0:a.value)?o:[]),e}),[]))),A=a=>{if(e.readonly||!a.date)return;const{date:o}=a,{type:l}=e;if("range"===l){if(!p.value)return void C([o]);const[t,a]=p.value;if(t&&!a){const a=ne(o,t);if(1===a){const e=((e,t,a)=>{var o;return null==(o=e.find((e=>-1===ne(t,e.date)&&-1===ne(e.date,a))))?void 0:o.date})(B.value,t,o);if(e){const a=ce(e);-1===ne(t,a)?C([t,a]):C([o])}else C([t,o],!0)}else-1===a?C([o]):e.allowSameDay&&C([o,o],!0)}else C([o])}else if("multiple"===l){if(!p.value)return void C([o]);const a=p.value,l=a.findIndex((e=>0===ne(e,o)));if(-1!==l){const[e]=a.splice(l,1);t("unselect",re(e))}else e.maxRange&&a.length>=+e.maxRange?ee(e.rangePrompt||oe("rangePrompt",e.maxRange)):C([...a,o])}else C(o,!0)},R=e=>t("update:show",e),F=(a,o)=>{const n=0!==o||!e.showSubtitle;return c(ge,u({ref:g(o),date:a,currentDate:p.value,showMonthTitle:n,firstDayOfWeek:y.value},d(e,["type","color","minDate","maxDate","showMark","formatter","rowHeight","lazyRender","showSubtitle","allowSameDay"]),{onClick:A,onClickDisabledDate:e=>t("clickDisabledDate",e)}),d(l,["top-info","bottom-info","month-title"]))},L=()=>{if(l.footer)return l.footer();if(e.showConfirm){const t=l["confirm-text"],a=D.value,o=a?e.confirmDisabledText:e.confirmText;return c(N,{round:!0,block:!0,type:"primary",color:e.color,class:ae("confirm"),disabled:a,nativeType:"button",onClick:T},{default:()=>[t?t({disabled:a}):o||oe("confirm")]})}},Y=()=>{const a=f.value.textFn();return c("div",{class:ae()},[c(he,{date:f.value.date,title:e.title,subtitle:a,showTitle:e.showTitle,showSubtitle:e.showSubtitle,firstDayOfWeek:y.value,onClickSubtitle:e=>t("clickSubtitle",e)},d(l,["title","subtitle"])),c("div",{ref:m,class:ae("body"),onScroll:w},[h.value.map(F)]),c("div",{class:[ae("footer"),{"van-safe-area-bottom":e.safeAreaInsetBottom}]},[L()])])};return r((()=>e.show),S),r((()=>[e.type,e.minDate,e.maxDate]),(()=>x(i(p.value)))),r((()=>e.defaultDate),((e=null)=>{p.value=e,k()})),W({reset:x,scrollToDate:b,getSelectedDate:()=>p.value}),P(S),()=>e.poppable?c(z,{show:e.show,class:ae("popup"),round:e.round,position:e.position,closeable:e.showTitle||e.showSubtitle,teleport:e.teleport,closeOnPopstate:e.closeOnPopstate,safeAreaInsetTop:e.safeAreaInsetTop,closeOnClickOverlay:e.closeOnClickOverlay,"onUpdate:show":R},{default:Y}):Y()}});e("C",k(we))}}}));
