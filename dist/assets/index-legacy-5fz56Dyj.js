System.register(["./index-legacy-9OZgdCRp.js","./use-scope-id-legacy-CIAYnXz1.js"],(function(e,o){"use strict";var t,a,l,n,s,r,c,i,u,v,d,p,f,m,h,y,b,w,I,k,x,O,z,g,S,C,A,B,P,L,T,Y,R,X,j,E,D,H;return{setters:[e=>{t=e.U,a=e.T,l=e.al,n=e.r,s=e.b7,r=e.aO,c=e.b8,i=e.ai,u=e.w,v=e.b9,d=e.Y,p=e.L,f=e.d,m=e.ao,h=e.g,y=e.ba,b=e.ak,w=e.aA,I=e.W,k=e.G,x=e.P,O=e.a0,z=e.a3,g=e.c,S=e.J,C=e.q,A=e.bb,B=e.a8,P=e.bc,L=e.ax,T=e.F,Y=e.bd,R=e.Z,X=e.Q,j=e.R,E=e.I},e=>{D=e.u,H=e.a}],execute:function(){e("u",$);const o=e("p",{show:Boolean,zIndex:t,overlay:a,duration:t,teleport:[String,Object],lockScroll:a,lazyRender:a,beforeClose:Function,overlayStyle:Object,overlayClass:l,transitionAppear:Boolean,closeOnClickOverlay:a});function $(){const e=n(0),o=n(0),t=n(0),a=n(0),l=n(0),r=n(0),c=n(""),i=n(!0),u=()=>{t.value=0,a.value=0,l.value=0,r.value=0,c.value="",i.value=!0};return{move:n=>{const u=n.touches[0];var v,d;t.value=(u.clientX<0?0:u.clientX)-e.value,a.value=u.clientY-o.value,l.value=Math.abs(t.value),r.value=Math.abs(a.value),(!c.value||l.value<10&&r.value<10)&&(c.value=(v=l.value,d=r.value,v>d?"horizontal":d>v?"vertical":"")),i.value&&(l.value>s||r.value>s)&&(i.value=!1)},start:t=>{u(),e.value=t.touches[0].clientX,o.value=t.touches[0].clientY},reset:u,startX:e,startY:o,deltaX:t,deltaY:a,offsetX:l,offsetY:r,direction:c,isVertical:()=>"vertical"===c.value,isHorizontal:()=>"horizontal"===c.value,isTap:i}}let F=0;const M="van-overflow-hidden";function N(e){const o=n(!1);return u(e,(e=>{e&&(o.value=e)}),{immediate:!0}),e=>()=>o.value?e():null}const[V,q]=p("overlay"),G={show:Boolean,zIndex:t,duration:t,className:l,lockScroll:a,lazyRender:a,customStyle:Object};var J=f({name:V,props:G,setup(e,{slots:o}){const t=n(),a=N((()=>e.show||!e.lazyRender))((()=>{var a;const l=b(w(e.zIndex),e.customStyle);return I(e.duration)&&(l.animationDuration=`${e.duration}s`),k(h("div",{ref:t,style:l,class:[q(),e.className]},[null==(a=o.default)?void 0:a.call(o)]),[[x,e.show]])}));return m("touchmove",(o=>{e.lockScroll&&d(o,!0)}),{target:t}),()=>h(y,{name:"van-fade",appear:!0},{default:a})}});const K=O(J),Q=b({},o,{round:Boolean,position:z("center"),closeIcon:z("cross"),closeable:Boolean,transition:String,iconPrefix:String,closeOnPopstate:Boolean,closeIconPosition:z("top-right"),safeAreaInsetTop:Boolean,safeAreaInsetBottom:Boolean}),[U,W]=p("popup");var Z=f({name:U,inheritAttrs:!1,props:Q,emits:["open","close","opened","closed","keydown","update:show","clickOverlay","clickCloseIcon"],setup(e,{emit:o,attrs:t,slots:a}){let l,s;const p=n(),f=n(),b=N((()=>e.show||!e.lazyRender)),w=g((()=>{const o={zIndex:p.value};return I(e.duration)&&(o["center"===e.position?"animationDuration":"transitionDuration"]=`${e.duration}s`),o})),O=()=>{l||(l=!0,p.value=void 0!==e.zIndex?+e.zIndex:Y(),o("open"))},z=()=>{l&&R(e.beforeClose,{done(){l=!1,o("close"),o("update:show",!1)}})},V=t=>{o("clickOverlay",t),e.closeOnClickOverlay&&z()},q=()=>{if(e.overlay)return h(K,X({show:e.show,class:e.overlayClass,zIndex:p.value,duration:e.duration,customStyle:e.overlayStyle,role:e.closeOnClickOverlay?"button":void 0,tabindex:e.closeOnClickOverlay?0:void 0},H(),{onClick:V}),{default:a["overlay-content"]})},G=e=>{o("clickCloseIcon",e),z()},J=()=>{if(e.closeable)return h(E,{role:"button",tabindex:0,name:e.closeIcon,class:[W("close-icon",e.closeIconPosition),j],classPrefix:e.iconPrefix,onClick:G},null)};let Q;const U=()=>{Q&&clearTimeout(Q),Q=setTimeout((()=>{o("opened")}))},Z=()=>o("closed"),_=e=>o("keydown",e),ee=b((()=>{var o;const{round:l,position:n,safeAreaInsetTop:s,safeAreaInsetBottom:r}=e;return k(h("div",X({ref:f,style:w.value,role:"dialog",tabindex:0,class:[W({round:l,[n]:n}),{"van-safe-area-top":s,"van-safe-area-bottom":r}],onKeydown:_},t,H()),[null==(o=a.default)?void 0:o.call(a),J()]),[[x,e.show]])})),oe=()=>{const{position:o,transition:t,transitionAppear:a}=e;return h(y,{name:t||("center"===o?"van-fade":`van-popup-slide-${o}`),appear:a,onAfterEnter:U,onAfterLeave:Z},{default:ee})};return u((()=>e.show),(e=>{e&&!l&&(O(),0===t.tabindex&&S((()=>{var e;null==(e=f.value)||e.focus()}))),!e&&l&&(l=!1,o("close"))})),D({popupRef:f}),function(e,o){const t=$(),a=o=>{t.move(o);const a=t.deltaY.value>0?"10":"01",l=v(o.target,e.value),{scrollHeight:n,offsetHeight:s,scrollTop:r}=l;let c="11";0===r?c=s>=n?"00":"01":r+s>=n&&(c="10"),"11"===c||!t.isVertical()||parseInt(c,2)&parseInt(a,2)||d(o,!0)},l=()=>{document.addEventListener("touchstart",t.start),document.addEventListener("touchmove",a,{passive:!1}),F||document.body.classList.add(M),F++},n=()=>{F&&(document.removeEventListener("touchstart",t.start),document.removeEventListener("touchmove",a),F--,F||document.body.classList.remove(M))},s=()=>o()&&n();r((()=>o()&&l())),c(s),i(s),u(o,(e=>{e?l():n()}))}(f,(()=>e.show&&e.lockScroll)),m("popstate",(()=>{e.closeOnPopstate&&(z(),s=!1)})),C((()=>{e.show&&O()})),A((()=>{s&&(o("update:show",!0),s=!1)})),c((()=>{e.show&&e.teleport&&(z(),s=!0)})),B(P,(()=>e.show)),()=>e.teleport?h(L,{to:e.teleport},{default:()=>[q(),oe()]}):h(T,null,[q(),oe()])}});e("P",O(Z))}}}));
