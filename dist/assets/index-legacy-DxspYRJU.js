System.register(["./index-legacy-9OZgdCRp.js","./index-legacy-ad9KPgzi.js","./use-id-legacy-Bsk_U-rn.js","./use-scope-id-legacy-CIAYnXz1.js"],(function(e,t){"use strict";var a,l,r,n,o,i,s,u,c,d,g,f,p,v,m,h,b,y,k,x,S,w,M,V,C,I,A,B,E,z,j,T,L,P,W,$,q,F;return{setters:[e=>{a=e.b1,l=e.b2,r=e.b3,n=e.b4,o=e.aJ,i=e.L,s=e.ak,u=e.U,c=e.a3,d=e.al,g=e.d,f=e.A,p=e.r,v=e.aj,m=e.c,h=e.M,b=e.a8,y=e.b5,k=e.w,x=e.J,S=e.q,w=e.ao,M=e.g,V=e.S,C=e.a$,I=e.W,A=e.b6,B=e.V,E=e.Y,z=e.I,j=e.Q,T=e.v,L=e.X,P=e.a0},e=>{W=e.c,$=e.C},e=>{q=e.u},e=>{F=e.u}],execute:function(){function t(e){return Array.isArray(e)?!e.length:0!==e&&!e}function H(e,t){const{message:a}=t;return n(a)?a(e,t):a||""}function R({target:e}){e.composing=!0}function D({target:e}){e.composing&&(e.composing=!1,e.dispatchEvent(new Event("input")))}function J(e){return[...e].length}function O(e,t){return[...e].slice(0,t).join("")}const[K,Q]=i("field"),U=e("f",{id:String,name:String,leftIcon:String,rightIcon:String,autofocus:Boolean,clearable:Boolean,maxlength:u,formatter:Function,clearIcon:c("clear"),modelValue:V(""),inputAlign:String,placeholder:String,autocomplete:String,autocapitalize:String,autocorrect:String,errorMessage:String,enterkeyhint:String,clearTrigger:c("focus"),formatTrigger:c("onChange"),spellcheck:{type:Boolean,default:null},error:{type:Boolean,default:null},disabled:{type:Boolean,default:null},readonly:{type:Boolean,default:null}}),X=s({},W,U,{rows:u,type:c("text"),rules:Array,autosize:[Boolean,Object],labelWidth:u,labelClass:d,labelAlign:String,showWordLimit:Boolean,errorMessageAlign:String,colon:{type:Boolean,default:null}});var Y=g({name:K,props:X,emits:["blur","focus","clear","keypress","clickInput","endValidate","startValidate","clickLeftIcon","clickRightIcon","update:modelValue"],setup(e,{emit:n,slots:i}){const s=q(),u=f({status:"unvalidated",focused:!1,validateMessage:""}),c=p(),d=p(),g=p(),{parent:V}=v(C),P=()=>{var t;return String(null!=(t=e.modelValue)?t:"")},W=t=>I(e[t])?e[t]:V&&I(V.props[t])?V.props[t]:void 0,K=m((()=>{const t=W("readonly");if(e.clearable&&!t){const t=""!==P(),a="always"===e.clearTrigger||"focus"===e.clearTrigger&&u.focused;return t&&a}return!1})),U=m((()=>g.value&&i.input?g.value():e.modelValue)),X=m((()=>{var t;const a=W("required");return"auto"===a?null==(t=e.rules)?void 0:t.some((e=>e.required)):a})),Y=e=>e.reduce(((e,a)=>e.then((()=>{if("failed"===u.status)return;let{value:e}=U;if(a.formatter&&(e=a.formatter(e,a)),!function(e,a){if(t(e)){if(a.required)return!1;if(!1===a.validateEmpty)return!0}return!(a.pattern&&!a.pattern.test(String(e)))}(e,a))return u.status="failed",void(u.validateMessage=H(e,a));if(a.validator){if(t(e)&&!1===a.validateEmpty)return;return function(e,t){return new Promise((a=>{const l=t.validator(e,t);r(l)?l.then(a):a(l)}))}(e,a).then((t=>{t&&"string"==typeof t?(u.status="failed",u.validateMessage=t):!1===t&&(u.status="failed",u.validateMessage=H(e,a))}))}}))),Promise.resolve()),G=()=>{u.status="unvalidated",u.validateMessage=""},N=()=>n("endValidate",{status:u.status,message:u.validateMessage}),Z=(t=e.rules)=>new Promise((a=>{G(),t?(n("startValidate"),Y(t).then((()=>{"failed"===u.status?(a({name:e.name,message:u.validateMessage}),N()):(u.status="passed",a(),N())}))):a()})),_=t=>{if(V&&e.rules){const{validateTrigger:a}=V.props,l=A(a).includes(t),r=e.rules.filter((e=>e.trigger?A(e.trigger).includes(t):l));r.length&&Z(r)}},ee=(t,a="onChange")=>{const l=t;t=(t=>{var a;const{maxlength:l}=e;if(I(l)&&J(t)>+l){const e=P();if(e&&J(e)===+l)return e;const r=null==(a=c.value)?void 0:a.selectionEnd;if(u.focused&&r){const e=[...t],a=e.length-+l;return e.splice(r-a,a),e.join("")}return O(t,+l)}return t})(t);const r=J(l)-J(t);if("number"===e.type||"digit"===e.type){const a="number"===e.type;t=B(t,a,a)}let o=0;if(e.formatter&&a===e.formatTrigger){const{formatter:a,maxlength:r}=e;if(t=a(t),I(r)&&J(t)>+r&&(t=O(t,+r)),c.value&&u.focused){const{selectionEnd:e}=c.value,t=O(l,e);o=J(a(t))-J(t)}}if(c.value&&c.value.value!==t)if(u.focused){let{selectionStart:e,selectionEnd:a}=c.value;if(c.value.value=t,I(e)&&I(a)){const l=J(t);r?(e-=r,a-=r):o&&(e+=o,a+=o),c.value.setSelectionRange(Math.min(e,l),Math.min(a,l))}}else c.value.value=t;t!==e.modelValue&&n("update:modelValue",t)},te=e=>{e.target.composing||ee(e.target.value)},ae=()=>{var e;return null==(e=c.value)?void 0:e.blur()},le=()=>{var e;return null==(e=c.value)?void 0:e.focus()},re=()=>{const t=c.value;"textarea"===e.type&&e.autosize&&t&&function(e,t){const r=a();e.style.height="auto";let n=e.scrollHeight;if(o(t)){const{maxHeight:e,minHeight:a}=t;void 0!==e&&(n=Math.min(n,e)),void 0!==a&&(n=Math.max(n,a))}n&&(e.style.height=`${n}px`,l(r))}(t,e.autosize)},ne=e=>{u.focused=!0,n("focus",e),x(re),W("readonly")&&ae()},oe=e=>{u.focused=!1,ee(P(),"onBlur"),n("blur",e),W("readonly")||(_("onBlur"),x(re),L())},ie=e=>n("clickInput",e),se=e=>n("clickLeftIcon",e),ue=e=>n("clickRightIcon",e),ce=m((()=>"boolean"==typeof e.error?e.error:!(!V||!V.props.showError||"failed"!==u.status)||void 0)),de=m((()=>{const e=W("labelWidth"),t=W("labelAlign");if(e&&"top"!==t)return{width:h(e)}})),ge=t=>{13===t.keyCode&&(V&&V.props.submitOnEnter||"textarea"===e.type||E(t),"search"===e.type&&ae()),n("keypress",t)},fe=()=>e.id||`${s}-input`,pe=()=>{const t=Q("control",[W("inputAlign"),{error:ce.value,custom:!!i.input,"min-height":"textarea"===e.type&&!e.autosize}]);if(i.input)return M("div",{class:t,onClick:ie},[i.input()]);const a={id:fe(),ref:c,name:e.name,rows:void 0!==e.rows?+e.rows:void 0,class:t,disabled:W("disabled"),readonly:W("readonly"),autofocus:e.autofocus,placeholder:e.placeholder,autocomplete:e.autocomplete,autocapitalize:e.autocapitalize,autocorrect:e.autocorrect,enterkeyhint:e.enterkeyhint,spellcheck:e.spellcheck,"aria-labelledby":e.label?`${s}-label`:void 0,onBlur:oe,onFocus:ne,onInput:te,onClick:ie,onChange:D,onKeypress:ge,onCompositionend:D,onCompositionstart:R};return"textarea"===e.type?M("textarea",a,null):M("input",j("number"===(l=e.type)?{type:"text",inputmode:"decimal"}:"digit"===l?{type:"tel",inputmode:"numeric"}:{type:l},a),null);var l},ve=()=>{const t=i["right-icon"];if(e.rightIcon||t)return M("div",{class:Q("right-icon"),onClick:ue},[t?t():M(z,{name:e.rightIcon,classPrefix:e.iconPrefix},null)])},me=()=>{if(e.showWordLimit&&e.maxlength){const t=J(P());return M("div",{class:Q("word-limit")},[M("span",{class:Q("word-num")},[t]),T("/"),e.maxlength])}},he=()=>{if(V&&!1===V.props.showErrorMessage)return;const t=e.errorMessage||u.validateMessage;if(t){const e=i["error-message"],a=W("errorMessageAlign");return M("div",{class:Q("error-message",a)},[e?e({message:t}):t])}},be=()=>[M("div",{class:Q("body")},[pe(),K.value&&M(z,{ref:d,name:e.clearIcon,class:Q("clear")},null),ve(),i.button&&M("div",{class:Q("button")},[i.button()])]),me(),he()];return F({blur:ae,focus:le,validate:Z,formValue:U,resetValidation:G,getValidationStatus:()=>u.status}),b(y,{customValue:g,resetValidation:G,validateWithTrigger:_}),k((()=>e.modelValue),(()=>{ee(P()),G(),_("onChange"),x(re)})),S((()=>{ee(P(),e.formatTrigger),x(re)})),w("touchstart",(e=>{E(e),n("update:modelValue",""),n("clear",e)}),{target:m((()=>{var e;return null==(e=d.value)?void 0:e.$el}))}),()=>{const t=W("disabled"),a=W("labelAlign"),l=(()=>{const t=i["left-icon"];if(e.leftIcon||t)return M("div",{class:Q("left-icon"),onClick:se},[t?t():M(z,{name:e.leftIcon,classPrefix:e.iconPrefix},null)])})();return M($,{size:e.size,class:Q({error:ce.value,disabled:t,[`label-${a}`]:a}),center:e.center,border:e.border,isLink:e.isLink,clickable:e.clickable,titleStyle:de.value,valueClass:Q("value"),titleClass:[Q("label",[a,{required:X.value}]),e.labelClass],arrowDirection:e.arrowDirection},{icon:l&&"top"!==a?()=>l:null,title:()=>{const t=(()=>{const t=W("labelWidth"),a=W("labelAlign"),l=W("colon")?":":"";return i.label?[i.label(),l]:e.label?M("label",{id:`${s}-label`,for:i.input?void 0:fe(),onClick:e=>{E(e),le()},style:"top"===a&&t?{width:h(t)}:void 0},[e.label+l]):void 0})();return"top"===a?[l,t].filter(Boolean):t||[]},value:be,extra:i.extra})}}});e("F",P(Y))}}}));
