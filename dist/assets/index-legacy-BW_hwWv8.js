System.register(["./index-legacy-C7g6TEdz.js"],(function(e,o){"use strict";var t,a,n,l,s,r,c,i,u,v,d,p,f,m,h,y,b,w,I,x,O,k,z,S,g,C,B,A,P,L,T,X,Y,E,j,R,$;return{setters:[e=>{t=e.ai,a=e.ar,n=e.T,l=e.S,s=e.aj,r=e.r,c=e.b7,i=e.aO,u=e.b8,v=e.ag,d=e.w,p=e.b9,f=e.X,m=e.K,h=e.d,y=e.an,b=e.g,w=e.ba,I=e.az,x=e.V,O=e.E,k=e.O,z=e.$,S=e.a0,g=e.c,C=e.J,B=e.q,A=e.bb,P=e.a6,L=e.bc,T=e.aw,X=e.F,Y=e.bd,E=e.Y,j=e.P,R=e.Q,$=e.I}],execute:function(){function o(e){const o=a();o&&t(o.proxy,e)}e({a:H,u:o});const D=e("p",{show:Boolean,zIndex:n,overlay:l,duration:n,teleport:[String,Object],lockScroll:l,lazyRender:l,beforeClose:Function,overlayStyle:Object,overlayClass:s,transitionAppear:Boolean,closeOnClickOverlay:l});function H(){const e=r(0),o=r(0),t=r(0),a=r(0),n=r(0),l=r(0),s=r(""),i=r(!0),u=()=>{t.value=0,a.value=0,n.value=0,l.value=0,s.value="",i.value=!0};return{move:r=>{const u=r.touches[0];var v,d;t.value=(u.clientX<0?0:u.clientX)-e.value,a.value=u.clientY-o.value,n.value=Math.abs(t.value),l.value=Math.abs(a.value),(!s.value||n.value<10&&l.value<10)&&(s.value=(v=n.value,d=l.value,v>d?"horizontal":d>v?"vertical":"")),i.value&&(n.value>c||l.value>c)&&(i.value=!1)},start:t=>{u(),e.value=t.touches[0].clientX,o.value=t.touches[0].clientY},reset:u,startX:e,startY:o,deltaX:t,deltaY:a,offsetX:n,offsetY:l,direction:s,isVertical:()=>"vertical"===s.value,isHorizontal:()=>"horizontal"===s.value,isTap:i}}let V=0;const F="van-overflow-hidden";function K(e){const o=r(!1);return d(e,(e=>{e&&(o.value=e)}),{immediate:!0}),e=>()=>o.value?e():null}const M=e("b",(()=>{var e;const{scopeId:o}=(null==(e=a())?void 0:e.vnode)||{};return o?{[o]:""}:null})),[N,q]=m("overlay"),J={show:Boolean,zIndex:n,duration:n,className:s,lockScroll:l,lazyRender:l,customStyle:Object};var Q=h({name:N,props:J,setup(e,{slots:o}){const a=r(),n=K((()=>e.show||!e.lazyRender))((()=>{var n;const l=t(I(e.zIndex),e.customStyle);return x(e.duration)&&(l.animationDuration=`${e.duration}s`),O(b("div",{ref:a,style:l,class:[q(),e.className]},[null==(n=o.default)?void 0:n.call(o)]),[[k,e.show]])}));return y("touchmove",(o=>{e.lockScroll&&f(o,!0)}),{target:a}),()=>b(w,{name:"van-fade",appear:!0},{default:n})}});const G=z(Q),U=t({},D,{round:Boolean,position:S("center"),closeIcon:S("cross"),closeable:Boolean,transition:String,iconPrefix:String,closeOnPopstate:Boolean,closeIconPosition:S("top-right"),safeAreaInsetTop:Boolean,safeAreaInsetBottom:Boolean}),[W,Z]=m("popup");var _=h({name:W,inheritAttrs:!1,props:U,emits:["open","close","opened","closed","keydown","update:show","clickOverlay","clickCloseIcon"],setup(e,{emit:t,attrs:a,slots:n}){let l,s;const c=r(),m=r(),h=K((()=>e.show||!e.lazyRender)),I=g((()=>{const o={zIndex:c.value};return x(e.duration)&&(o["center"===e.position?"animationDuration":"transitionDuration"]=`${e.duration}s`),o})),z=()=>{l||(l=!0,c.value=void 0!==e.zIndex?+e.zIndex:Y(),t("open"))},S=()=>{l&&E(e.beforeClose,{done(){l=!1,t("close"),t("update:show",!1)}})},D=o=>{t("clickOverlay",o),e.closeOnClickOverlay&&S()},N=()=>{if(e.overlay)return b(G,j({show:e.show,class:e.overlayClass,zIndex:c.value,duration:e.duration,customStyle:e.overlayStyle,role:e.closeOnClickOverlay?"button":void 0,tabindex:e.closeOnClickOverlay?0:void 0},M(),{onClick:D}),{default:n["overlay-content"]})},q=e=>{t("clickCloseIcon",e),S()},J=()=>{if(e.closeable)return b($,{role:"button",tabindex:0,name:e.closeIcon,class:[Z("close-icon",e.closeIconPosition),R],classPrefix:e.iconPrefix,onClick:q},null)};let Q;const U=()=>{Q&&clearTimeout(Q),Q=setTimeout((()=>{t("opened")}))},W=()=>t("closed"),_=e=>t("keydown",e),ee=h((()=>{var o;const{round:t,position:l,safeAreaInsetTop:s,safeAreaInsetBottom:r}=e;return O(b("div",j({ref:m,style:I.value,role:"dialog",tabindex:0,class:[Z({round:t,[l]:l}),{"van-safe-area-top":s,"van-safe-area-bottom":r}],onKeydown:_},a,M()),[null==(o=n.default)?void 0:o.call(n),J()]),[[k,e.show]])})),oe=()=>{const{position:o,transition:t,transitionAppear:a}=e;return b(w,{name:t||("center"===o?"van-fade":`van-popup-slide-${o}`),appear:a,onAfterEnter:U,onAfterLeave:W},{default:ee})};return d((()=>e.show),(e=>{e&&!l&&(z(),0===a.tabindex&&C((()=>{var e;null==(e=m.value)||e.focus()}))),!e&&l&&(l=!1,t("close"))})),o({popupRef:m}),function(e,o){const t=H(),a=o=>{t.move(o);const a=t.deltaY.value>0?"10":"01",n=p(o.target,e.value),{scrollHeight:l,offsetHeight:s,scrollTop:r}=n;let c="11";0===r?c=s>=l?"00":"01":r+s>=l&&(c="10"),"11"===c||!t.isVertical()||parseInt(c,2)&parseInt(a,2)||f(o,!0)},n=()=>{document.addEventListener("touchstart",t.start),document.addEventListener("touchmove",a,{passive:!1}),V||document.body.classList.add(F),V++},l=()=>{V&&(document.removeEventListener("touchstart",t.start),document.removeEventListener("touchmove",a),V--,V||document.body.classList.remove(F))},s=()=>o()&&l();i((()=>o()&&n())),u(s),v(s),d(o,(e=>{e?n():l()}))}(m,(()=>e.show&&e.lockScroll)),y("popstate",(()=>{e.closeOnPopstate&&(S(),s=!1)})),B((()=>{e.show&&z()})),A((()=>{s&&(t("update:show",!0),s=!1)})),u((()=>{e.show&&e.teleport&&(S(),s=!0)})),P(L,(()=>e.show)),()=>e.teleport?b(T,{to:e.teleport},{default:()=>[N(),oe()]}):b(X,null,[N(),oe()])}});e("P",z(_))}}}));
