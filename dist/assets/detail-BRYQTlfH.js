import{_ as S}from"./Container.vue_vue_type_script_setup_true_lang-GLuEUgiL.js";import{d as z,r as a,a as G,e as q,f as i,K as L,o as M,p as v,g as n,v as k,h as l,j as p}from"./index-CIq-oMdo.js";import{f as O,T as Q}from"./index-CKZ_uliA.js";import"./index-C0-qw_Ps.js";import{C as R}from"./index-BheCoyUB.js";import{C as j}from"./index-H4v7lFx6.js";import{S as K}from"./index-D59pHjdO.js";import"./index-gofcAkLv.js";import{F as Y}from"./index-CfBzFnno.js";import{g as H,a as J,G as W}from"./index-Da8Krel5.js";import{B as X}from"./index-CCszsqzv.js";import{F as Z}from"./index-BLH94utM.js";import{P as ee}from"./index-DEoV0_af.js";import"./use-scope-id-sANgzUDS.js";import"./index-s7_3JXei.js";import"./use-id-BlRh9Qoc.js";const te={class:"mt-20 text-right"},oe=["src"],ne=v("h3",{class:"text-center"},"下发设置",-1),le=v("span",null,"秒",-1),ae={class:"m-15"},ke=z({__name:"detail",setup(se){const y=L(),_=a(0),m=a([]),V=a([]);a([]),G(),a({src:"https://m.baidu.com/"});const r=a({}),c=a(!1),h=a(!1);a(!0),a(""),a(""),a([]),a(0);const U=a(""),w=a(!1);function $(){w.value=!0}function I(o){console.log("submit",o)}const C=o=>"".concat(o.getFullYear(),"-").concat(o.getMonth()+1,"-").concat(o.getDate());function P(o){const[e,s]=o;c.value=!1,r.value.dateTime="".concat(C(e)," ~ ").concat(C(s))}function N(){H({parentId:"13"}).then(o=>{o.forEach(e=>{V.value.push({text:e.fullName,id:e.id})})})}async function T(o){return new Promise(e=>{setTimeout(()=>{W({DepartmentId:o,Skip:1,PageSize:50}).then(s=>{let u=s.data.list;const d=[];u.forEach(f=>{d.push({text:f.firstName,id:Number(f.userName)})}),console.log(d,"userArr"),e(d)})},1e3)})}async function D(o){_.value=o;const e=V.value[o];if(!e.children){const s=await T(e.id);e.children=s}}function E(o){const e=[...m.value],s=e.indexOf(Number(o.id));return s==-1?(e.push(o.id),!1):(e.splice(s,1),console.log(m.value,"activeIds.value"),!1)}function A(){const o=y.query.id,e=y.query.name;J(o).then(s=>{const u=s.result,x="".concat("http://172.20.153.9:5001/","api/document/").concat(o,"/officeviewer?token=").concat(u,"&isVersion=false&fullfilename=").concat(e),b=new TextEncoder().encode(x),g=O(b);U.value="http://172.20.153.9:8012/onlinePreview?url=".concat(g)})}return A(),N(),(o,e)=>{const s=X,u=Y,d=K,f=j,x=Z,b=ee,g=R,B=Q,F=S;return M(),q(F,null,{default:i(()=>[v("div",te,[n(s,{type:"primary",class:"important-mr-10",size:"small",onClick:$},{default:i(()=>[k("下发")]),_:1}),n(s,{type:"warning",size:"small",to:"/file/createFrom"},{default:i(()=>[k("答题")]),_:1})]),v("iframe",{ref:"iframe",src:l(U),class:"mt-10",width:"100%",height:"500px",frameborder:"0",allowfullscreen:""},null,8,oe),n(b,{show:l(w),"onUpdate:show":e[8]||(e[8]=t=>p(w)?w.value=t:null),position:"bottom",title:"下发设置",style:{width:"100%",height:"90%"}},{default:i(()=>[ne,n(x,{onSubmit:I},{default:i(()=>[n(f,{inset:""},{default:i(()=>[n(u,{modelValue:l(r).dateTime,"onUpdate:modelValue":e[0]||(e[0]=t=>l(r).dateTime=t),"is-link":"",readonly:"",name:"datePicker",label:"时间选择",placeholder:"点击选择时间",onClick:e[1]||(e[1]=t=>c.value=!0)},null,8,["modelValue"]),n(u,{modelValue:l(m),"onUpdate:modelValue":e[2]||(e[2]=t=>p(m)?m.value=t:null),"is-link":"",readonly:"",name:"persons",label:"人员选择",placeholder:"点击下发人员",onClick:e[3]||(e[3]=t=>{h.value=!0})},null,8,["modelValue"]),n(u,{modelValue:l(r).browseDuration,"onUpdate:modelValue":e[4]||(e[4]=t=>l(r).browseDuration=t),name:"传阅时长",label:"传阅时长",placeholder:"传阅时长"},{"right-icon":i(()=>[le]),_:1},8,["modelValue"]),n(u,{name:"switch1",label:"到期推送","label-width":"150px"},{input:i(()=>[n(d,{modelValue:l(r).isExpirePush,"onUpdate:modelValue":e[5]||(e[5]=t=>l(r).isExpirePush=t)},null,8,["modelValue"])]),_:1}),n(u,{name:"switch2",label:"到期后不可查阅","label-width":"150px"},{input:i(()=>[n(d,{modelValue:l(r).isExpireUnableLook,"onUpdate:modelValue":e[6]||(e[6]=t=>l(r).isExpireUnableLook=t)},null,8,["modelValue"])]),_:1}),n(u,{name:"switch2",label:"是否答题","label-width":"150px"},{input:i(()=>[n(d,{modelValue:l(r).ishasQues,"onUpdate:modelValue":e[7]||(e[7]=t=>l(r).ishasQues=t)},null,8,["modelValue"])]),_:1})]),_:1}),v("div",ae,[n(s,{round:"",block:"",type:"primary","native-type":"submit"},{default:i(()=>[k(" 提交 ")]),_:1})])]),_:1})]),_:1},8,["show"]),n(g,{show:l(c),"onUpdate:show":e[9]||(e[9]=t=>p(c)?c.value=t:null),type:"range",onConfirm:P},null,8,["show"]),n(b,{show:l(h),"onUpdate:show":e[12]||(e[12]=t=>p(h)?h.value=t:null),position:"bottom"},{default:i(()=>[n(B,{"active-id":l(m),"onUpdate:activeId":e[10]||(e[10]=t=>p(m)?m.value=t:null),"main-active-index":l(_),"onUpdate:mainActiveIndex":e[11]||(e[11]=t=>p(_)?_.value=t:null),items:l(V),onClickNav:D,onClickItem:E},null,8,["active-id","main-active-index","items"])]),_:1},8,["show"])]),_:1})}}});export{ke as default};
